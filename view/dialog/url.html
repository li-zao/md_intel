{__NOLAYOUT__}
{include file="public/dialog" /}
<div class="layui-row">
    <div class="layui-col-md12 layui-padding-2">
        <form class="layui-form form-container" lay-filter="item-edit-form" id="item-edit-form">
            <div class="layui-form-item">
                <label class="layui-form-label">URL</label>
                <div class="layui-input-block">
                    <input type="text" name="url" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" id="source">
                <div class="layui-block">
                    <label class="layui-form-label">来源</label>
                    <div class="layui-input-block" id="source-div">
                    </div>
                </div>
            </div>
            <div class="layui-form-item" id="category">
                <div class="layui-block">
                    <label class="layui-form-label">类型</label>
                    <div class="layui-input-block" id="category-div">
                    </div>
                </div>
            </div>
            {foreach $params as $key => $val}
            <input type="hidden" name="{$key}" value="{$val}">
            {/foreach}
        </form>
    </div>
</div>

<script>
    let source = renderXmSelect('#source-div', JSON.parse('{$source|json_encode|raw}'), 'source', true);
    let category = renderXmSelect('#category-div', JSON.parse('{$category|json_encode|raw}'), 'category', true);
    layui.use(['form'], function () {
        var form = layui.form;
        form.val('item-edit-form', {
            "id": "{$record['id']}",
            "url": "{$record['url'] ?? ''}",
        });
    });
</script>